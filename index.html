<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1,maximum-scale=5">
<title>Draped Tulle Dress - Limited Stock | Elegance Draped in Dreams</title>
<meta name="description" content="The viral draped tulle dress everyone's obsessed with. Premium tulle, elegant draping, perfect for any occasion. Ships worldwide. 30-day returns.">

<!-- TikTok Pixel Code -->
<script>
!function (w, d, t) {
  w.TiktokAnalyticsObject=t;var ttq=w[t]=w[t]||[];ttq.methods=["page","track","identify","instances","debug","on","off","once","ready","alias","group","enableCookie","disableCookie"],ttq.setAndDefer=function(t,e){t[e]=function(){t.push([e].concat(Array.prototype.slice.call(arguments,0)))}};for(var i=0;i<ttq.methods.length;i++)ttq.setAndDefer(ttq,ttq.methods[i]);ttq.instance=function(t){for(var e=ttq._i[t]||[],n=0;n<ttq.methods.length;n++)ttq.setAndDefer(e,ttq.methods[n]);return e},ttq.load=function(e,n){var i="https://analytics.tiktok.com/i18n/pixel/events.js";ttq._i=ttq._i||{},ttq._i[e]=[],ttq._i[e]._u=i,ttq._t=ttq._t||{},ttq._t[e]=+new Date,ttq._o=ttq._o||{},ttq._o[e]=n||{};var o=document.createElement("script");o.type="text/javascript",o.async=!0,o.src=i+"?sdkid="+e+"&lib="+t;var a=document.getElementsByTagName("script")[0];a.parentNode.insertBefore(o,a)};
  ttq.load('D3CVHNBC77U2RE92M7O0');
  ttq.page();
  ttq.track('ViewContent', {
    content_id: 'draped-tulle-dress',
    content_type: 'product',
    content_name: 'Draped Tulle Dress',
    price: 59,
    currency: 'USD',
    value: 59
  });
}(window, document, 'ttq');
</script>
<!-- End TikTok Pixel Code -->

<!-- Performance Meta -->
<meta name="theme-color" content="#A78BBE">
<meta name="color-scheme" content="light">

<!-- Critical Resource Hints -->
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
<link rel="dns-prefetch" href="//analytics.google.com">
<link href="https://fonts.googleapis.com/css2?family=Playfair+Display:wght@400;500;600;700&family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">

<!-- Preload Critical Hero Image -->
<link rel="preload" as="image" href="./images/product/product-01.jpeg" type="image/jpeg" fetchpriority="high">

<!-- Critical CSS -->
<style>
/* CSS Variables - Extracted from Purple Tulle Dress */
:root {
  --color-primary: #A78BBE;
  --color-primary-light: #C5B3D9;
  --color-primary-dark: #8B6FA3;
  --color-secondary: #E5A4CB;
  --color-secondary-light: #F2C9E0;
  --color-accent: #D4AF37;
  --color-accent-light: #E8D4A0;
  --color-bg: #FDFCFB;
  --color-bg-alt: #F8F6F4;
  --color-text: #2D1B3D;
  --color-text-secondary: #6B5578;
  --color-text-light: #9D8AA8;
  --color-success: #A8D5BA;
  --color-error: #E8A0A8;
  --color-border: #E8DFF0;
  --gradient-primary: linear-gradient(135deg, #A78BBE 0%, #E5A4CB 100%);
  --shadow-premium: 0 8px 30px rgba(168, 139, 190, 0.12), 0 2px 8px rgba(229, 164, 203, 0.08);
  --shadow-glow: 0 0 20px rgba(168, 139, 190, 0.3);
}

/* Reset & Base - Overflow Prevention */
*, *::before, *::after { margin: 0; padding: 0; box-sizing: border-box; -webkit-tap-highlight-color: transparent; }
html { overflow-x: hidden; max-width: 100vw; scroll-behavior: smooth; }
body {
  font-family: 'Inter', -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
  color: var(--color-text);
  line-height: 1.6;
  background: var(--color-bg);
  -webkit-font-smoothing: antialiased;
  overflow-x: hidden;
  max-width: 100vw;
}

/* Typography */
h1, h2, h3, h4 { font-family: 'Playfair Display', Georgia, serif; font-weight: 600; letter-spacing: -0.02em; }

/* Layout */
.container { max-width: min(100%, 1200px); margin: 0 auto; padding: 0 clamp(16px, 3vw, 20px); }
.announcement { background: var(--gradient-primary); color: #fff; text-align: center; padding: 14px; font-size: 14px; font-weight: 600; letter-spacing: 0.5px; }
.product-hero { display: grid; grid-template-columns: 1fr 1fr; gap: 60px; padding: 40px 20px; align-items: start; min-height: 500px; }
.gallery { position: sticky; top: 20px; z-index: 1; }
.main-img { width: 100%; height: auto; border-radius: 16px; aspect-ratio: 3/4; object-fit: cover; background: var(--color-bg-alt); box-shadow: var(--shadow-premium); transition: opacity 0.3s ease; }
.product-info { position: relative; z-index: 2; }
.product-info h1 { font-size: clamp(28px, 5vw, 42px); margin-bottom: 12px; line-height: 1.15; color: var(--color-text); }
.tagline { color: var(--color-text-secondary); font-size: clamp(16px, 3vw, 18px); margin-bottom: 24px; font-weight: 400; line-height: 1.5; }
.price-box { display: flex; align-items: baseline; gap: 15px; margin-bottom: 24px; flex-wrap: wrap; }
.price { font-size: clamp(32px, 6vw, 40px); font-weight: 700; color: var(--color-primary-dark); letter-spacing: -0.02em; }
.old-price { font-size: clamp(20px, 4vw, 24px); color: var(--color-text-light); text-decoration: line-through; }
.badge { background: var(--color-secondary); color: #fff; padding: 6px 14px; border-radius: 20px; font-size: 13px; font-weight: 700; white-space: nowrap; }
.urgency-text { color: var(--color-secondary); font-size: 14px; font-weight: 600; margin-bottom: 20px; display: flex; align-items: center; gap: 8px; }

/* CTA Buttons */
.cta-btn {
  width: 100%;
  padding: 18px 24px;
  font-size: 17px;
  font-weight: 700;
  border-radius: 12px;
  border: none;
  cursor: pointer;
  margin-bottom: 14px;
  transition: all 0.25s cubic-bezier(0.4, 0, 0.2, 1);
  position: relative;
  overflow: hidden;
  min-height: 56px;
}
.cta-btn::before {
  content: '';
  position: absolute;
  top: 0;
  left: -100%;
  width: 100%;
  height: 100%;
  background: linear-gradient(90deg, transparent, rgba(255,255,255,0.25), transparent);
  transition: left 0.5s;
}
.cta-btn:hover::before { left: 100%; }
.cta-primary { background: var(--gradient-primary); color: #fff; box-shadow: 0 4px 16px rgba(167, 139, 190, 0.35); }
.cta-primary:hover { transform: translateY(-2px); box-shadow: var(--shadow-glow); }
.cta-primary:active { transform: translateY(0) scale(0.98); }
.cta-secondary { background: #fff; color: var(--color-primary-dark); border: 2px solid var(--color-primary); }
.cta-secondary:hover { background: var(--color-bg-alt); border-color: var(--color-primary-dark); }
.btn-subtitle { font-size: 12px; font-weight: 500; opacity: 0.9; margin-top: 4px; }

/* Trust Badges */
.trust-badges { display: flex; gap: 20px; margin-top: 24px; flex-wrap: wrap; }
.trust-badge { display: flex; align-items: center; gap: 8px; color: var(--color-text-secondary); font-size: 14px; font-weight: 500; }
.trust-badge svg { width: 20px; height: 20px; color: var(--color-primary); }

/* Guarantee Box */
.guarantee-box {
  background: linear-gradient(135deg, rgba(167, 139, 190, 0.08) 0%, rgba(229, 164, 203, 0.08) 100%);
  border: 2px solid var(--color-primary-light);
  border-radius: 12px;
  padding: 18px;
  margin-top: 24px;
  text-align: center;
}
.guarantee-box strong { color: var(--color-primary-dark); font-size: 16px; }
.guarantee-box p { color: var(--color-text-secondary); font-size: 13px; margin-top: 4px; }

/* Accordion Styles */
.accordion { width: 100%; max-width: 800px; margin: 0 auto; }
.accordion-item { border-bottom: 1px solid var(--color-border); }
.accordion-item:first-child { border-top: 1px solid var(--color-border); }
.accordion-header {
  display: flex;
  align-items: center;
  justify-content: space-between;
  width: 100%;
  padding: 18px 0;
  background: none;
  border: none;
  cursor: pointer;
  font-size: clamp(15px, 3vw, 17px);
  font-weight: 600;
  color: var(--color-text);
  text-align: left;
  transition: color 0.2s;
  min-height: 44px;
  gap: 12px;
}
.accordion-header:hover { color: var(--color-primary-dark); }
.accordion-header svg { width: 20px; height: 20px; flex-shrink: 0; }
.accordion-icon { color: var(--color-primary); }
.accordion-arrow { transition: transform 0.3s ease; color: var(--color-text-light); }
.accordion-item.open .accordion-arrow { transform: rotate(180deg); color: var(--color-primary); }
.accordion-content { max-height: 0; overflow: hidden; transition: max-height 0.4s cubic-bezier(0.4, 0, 0.2, 1); }
.accordion-item.open .accordion-content { max-height: 600px; }
.accordion-content-inner { padding: 0 0 20px 0; color: var(--color-text-secondary); font-size: 15px; line-height: 1.7; }
.accordion-content-inner ul { list-style: none; padding: 0; }
.accordion-content-inner li { padding: 8px 0 8px 24px; position: relative; }
.accordion-content-inner li::before { content: ''; position: absolute; left: 8px; top: 50%; transform: translateY(-50%); width: 6px; height: 6px; background: var(--color-primary); border-radius: 50%; }

/* Testimonial Card */
.testimonial-grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(min(100%, 340px), 1fr)); gap: 24px; }
.testimonial-card { background: #fff; border-radius: 16px; padding: 24px; box-shadow: var(--shadow-premium); border: 1px solid var(--color-border); transition: transform 0.3s ease, box-shadow 0.3s ease; }
.testimonial-card:hover { transform: translateY(-4px); box-shadow: var(--shadow-glow); }
.testimonial-header { display: flex; align-items: center; gap: 12px; margin-bottom: 16px; }
.testimonial-avatar { width: 48px; height: 48px; border-radius: 50%; object-fit: cover; border: 2px solid var(--color-primary-light); }
.testimonial-info { flex: 1; }
.testimonial-name { font-weight: 600; font-size: 15px; color: var(--color-text); }
.testimonial-platform { display: flex; align-items: center; gap: 6px; color: var(--color-text-light); font-size: 12px; }
.testimonial-platform svg { width: 14px; height: 14px; }
.testimonial-stars { color: #ffc107; font-size: 14px; letter-spacing: 2px; }
.testimonial-text { font-size: 15px; line-height: 1.65; color: var(--color-text-secondary); }
.testimonial-date { color: var(--color-text-light); font-size: 12px; margin-top: 12px; }

/* Size Selector */
.size-grid { display: grid; grid-template-columns: repeat(auto-fill, minmax(70px, 1fr)); gap: 12px; }
.size-btn { padding: 14px 12px; border: 2px solid var(--color-border); background: #fff; border-radius: 10px; cursor: pointer; font-weight: 600; transition: all 0.2s; font-size: 14px; min-height: 44px; min-width: 44px; }
.size-btn:not(:disabled):hover { border-color: var(--color-primary); transform: scale(1.03); }
.size-btn.selected { background: var(--gradient-primary); color: #fff; border-color: var(--color-primary); }
.size-btn:disabled { opacity: 0.4; cursor: not-allowed; }

/* Section Styles */
.section { padding: clamp(48px, 8vw, 80px) 0; }
.section-title { text-align: center; font-size: clamp(26px, 5vw, 36px); margin-bottom: 16px; color: var(--color-text); }
.section-subtitle { text-align: center; color: var(--color-text-secondary); margin-bottom: 48px; font-size: 16px; }

/* Feature Cards */
.feature-grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(min(100%, 280px), 1fr)); gap: 24px; }
.feature-card { background: #fff; padding: 32px; border-radius: 16px; box-shadow: var(--shadow-premium); text-align: center; transition: transform 0.3s ease; }
.feature-card:hover { transform: translateY(-4px); }
.feature-card svg { width: 48px; height: 48px; color: var(--color-primary); margin-bottom: 20px; }
.feature-card h3 { font-family: 'Playfair Display', serif; font-size: 20px; margin-bottom: 12px; color: var(--color-text); }
.feature-card p { color: var(--color-text-secondary); font-size: 14px; line-height: 1.6; }

/* Final CTA Section */
.final-cta { background: var(--gradient-primary); color: #fff; text-align: center; padding: 80px 20px; }
.final-cta h2 { font-size: clamp(28px, 5vw, 42px); margin-bottom: 16px; }
.final-cta p { font-size: 18px; opacity: 0.95; max-width: 500px; margin: 0 auto 32px; }
.final-cta button { background: #fff; color: var(--color-primary-dark); border: none; padding: 18px 48px; border-radius: 12px; font-size: 18px; font-weight: 700; cursor: pointer; transition: all 0.25s; box-shadow: 0 4px 20px rgba(0,0,0,0.15); }
.final-cta button:hover { transform: translateY(-2px) scale(1.02); box-shadow: 0 8px 30px rgba(0,0,0,0.2); }

/* Mobile Responsive */
@media (max-width: 768px) {
  .product-hero { grid-template-columns: 1fr; gap: 24px; padding: 16px; max-width: 100vw; overflow-x: hidden; }
  .gallery { position: static; max-width: 100%; }
  .main-img { border-radius: 12px; max-width: 100%; width: 100%; }
  .product-info { max-width: 100%; overflow-x: hidden; }
  .trust-badges { gap: 12px; flex-wrap: wrap; }
  .trust-badge { font-size: 13px; }
  .thumbnails { max-width: 100%; overflow-x: auto; }
}

/* Animations */
.fade-in { opacity: 0; transform: translateY(20px); transition: opacity 0.6s ease, transform 0.6s ease; }
.fade-in.visible { opacity: 1; transform: translateY(0); }
@keyframes pulse { 0%, 100% { box-shadow: 0 0 0 0 rgba(167, 139, 190, 0.4); } 50% { box-shadow: 0 0 0 12px rgba(167, 139, 190, 0); } }

/* Mobile Sticky CTA */
@media (max-width: 768px) {
  .mobile-sticky-cta { position: sticky; bottom: 0; left: 0; right: 0; background: #fff; padding: 12px 16px; box-shadow: 0 -4px 16px rgba(167, 139, 190, 0.15); z-index: 100; border-top: 1px solid var(--color-border); }
  .mobile-sticky-cta .cta-btn { margin: 0; }
}
@supports (padding: max(0px)) {
  .mobile-sticky-cta { padding-bottom: max(12px, env(safe-area-inset-bottom)); }
}
</style>

<!-- Prefetch Additional Images -->
<link rel="prefetch" as="image" href="./images/product/product-02.jpeg">
<link rel="prefetch" as="image" href="./images/product/product-03.jpeg">
</head>

<body>

<!-- Order Bump Popup -->
<div id="orderBumpPopup" style="display:none;position:fixed;top:0;left:0;width:100%;height:100%;background:rgba(45,27,61,0.85);z-index:10000;align-items:center;justify-content:center;padding:20px;backdrop-filter:blur(4px)">
  <div style="background:#fff;border-radius:20px;max-width:560px;width:100%;padding:40px;position:relative;box-shadow:0 25px 80px rgba(45,27,61,0.35);animation:fadeIn 0.3s ease">
    <button onclick="closeOrderBumpPopup()" style="position:absolute;top:16px;right:16px;background:var(--color-bg-alt);border:none;font-size:24px;cursor:pointer;color:var(--color-text-light);width:40px;height:40px;border-radius:50%;display:flex;align-items:center;justify-content:center;transition:all 0.2s" onmouseover="this.style.background='var(--color-primary-light)'" onmouseout="this.style.background='var(--color-bg-alt)'">&times;</button>
    <div style="text-align:center;margin-bottom:28px">
      <div style="background:var(--gradient-primary);color:#fff;display:inline-block;padding:8px 20px;border-radius:20px;font-size:13px;font-weight:700;margin-bottom:20px;letter-spacing:0.5px">COMPLETE YOUR LOOK</div>
      <h2 style="font-family:'Playfair Display',serif;font-size:28px;font-weight:600;margin-bottom:12px;color:var(--color-text)">Add Matching Accessories?</h2>
      <p style="color:var(--color-text-secondary);font-size:15px">Complete your elegant ensemble with perfectly paired accessories</p>
    </div>
    <div style="background:var(--color-bg-alt);border-radius:14px;padding:24px;margin-bottom:24px">
      <div style="display:flex;gap:20px;align-items:center">
        <div style="flex:1">
          <h3 style="font-size:18px;font-weight:700;margin-bottom:10px;color:var(--color-text)">Pearl Drop Earrings</h3>
          <ul style="list-style:none;padding:0;margin:0;font-size:14px;color:var(--color-text-secondary)">
            <li style="margin:6px 0">Elegant pearl design</li>
            <li style="margin:6px 0">Matches dress perfectly</li>
            <li style="margin:6px 0">Gift-ready packaging</li>
          </ul>
        </div>
        <div style="text-align:center">
          <div style="font-size:14px;color:var(--color-text-light);text-decoration:line-through">$49</div>
          <div style="font-size:36px;font-weight:700;color:var(--color-primary-dark)">$10</div>
          <div style="background:var(--color-success);color:#fff;padding:4px 12px;border-radius:12px;font-size:12px;font-weight:700;margin-top:6px">80% OFF</div>
        </div>
      </div>
    </div>
    <div id="orderSummary" style="background:#fff;border:2px solid var(--color-border);border-radius:14px;padding:20px;margin-bottom:24px"></div>
    <button onclick="acceptOrderBump()" style="width:100%;background:var(--gradient-primary);color:#fff;border:none;padding:18px;border-radius:12px;font-size:17px;font-weight:700;cursor:pointer;margin-bottom:12px;transition:all 0.25s;box-shadow:0 4px 16px rgba(167,139,190,0.35)">
      Yes! Add Earrings - Only $10
    </button>
    <button onclick="declineOrderBump()" style="width:100%;background:#fff;color:var(--color-text-secondary);border:2px solid var(--color-border);padding:14px;border-radius:12px;font-size:14px;font-weight:600;cursor:pointer;transition:all 0.2s">
      No thanks, just the dress
    </button>
  </div>
</div>

<!-- Main Content -->
<div class="main-content" id="mainContent">
  <div class="announcement">THE DRESS TIKTOK CAN'T STOP TALKING ABOUT - LIMITED STOCK</div>

  <div class="container">
    <div class="product-hero">
      <div class="gallery">
        <img class="main-img fade-in visible" id="heroImage" src="./images/product/product-01.jpeg" alt="Draped Tulle Dress" width="600" height="800" loading="eager" decoding="async">
        <div id="thumbs" style="display:flex;gap:12px;margin-top:16px;overflow-x:auto;padding-bottom:8px"></div>
      </div>

      <div class="product-info">
        <h1 class="fade-in visible">Feel Like the Main Character in This Dreamy Draped Tulle Dress</h1>
        <p class="tagline fade-in visible">Elegance Draped in Dreams - The dress that makes every moment unforgettable</p>

        <div class="price-box fade-in visible">
          <span class="price">$59</span>
          <span class="old-price">$89</span>
          <span class="badge">34% OFF</span>
        </div>
        <div class="urgency-text">
          <svg width="16" height="16" fill="currentColor" viewBox="0 0 24 24"><circle cx="12" cy="12" r="10" stroke="currentColor" stroke-width="2" fill="none"/><path d="M12 6v6l4 2" stroke="currentColor" stroke-width="2" stroke-linecap="round"/></svg>
          Over 500 sold in the last 24 hours
        </div>

        <button class="cta-btn cta-primary fade-in visible" id="primaryCTA" onclick="handleAddToCart('primary')">
          CLAIM YOURS BEFORE IT'S GONE - $59
          <div class="btn-subtitle">In Stock: Ships Same-Day (Only 23 Left)</div>
        </button>

        <button class="cta-btn cta-secondary fade-in visible" id="secondaryCTA" onclick="handleAddToCart('secondary')">
          PRE-ORDER FOR 68% OFF - $19
          <div class="btn-subtitle">Worth the wait: Ships in 2-3 weeks (save $40)</div>
        </button>

        <!-- Guarantee Badge -->
        <div class="guarantee-box fade-in visible">
          <strong>30-Day Money-Back Guarantee</strong>
          <p>Don't love it? Return for free. No questions asked.</p>
        </div>

        <div class="trust-badges fade-in visible">
          <div class="trust-badge">
            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M5 13l4 4L19 7"/></svg>
            Free Returns
          </div>
          <div class="trust-badge">
            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M5 13l4 4L19 7"/></svg>
            Fast Shipping
          </div>
          <div class="trust-badge">
            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M5 13l4 4L19 7"/></svg>
            Secure Checkout
          </div>
        </div>
      </div>
    </div>
  </div>

  <!-- Lazy Content Container -->
  <div id="lazyContent"></div>
</div>

<script>
// Performance Metrics
const perfMetrics = { marks: {}, mark(name) { this.marks[name] = performance.now(); } };
perfMetrics.mark('script-start');

// Initialize on DOM ready
document.addEventListener('DOMContentLoaded', function() {
  loadThumbnails();
  loadRemainingContent();
  perfMetrics.mark('content-loaded');
});

// ESC key to close popup
document.addEventListener('keydown', function(e) {
  if (e.key === 'Escape') {
    const popup = document.getElementById('orderBumpPopup');
    if (popup && popup.style.display === 'flex') closeOrderBumpPopup();
  }
});

// Click outside popup to close
document.getElementById('orderBumpPopup')?.addEventListener('click', function(e) {
  if (e.target === this) closeOrderBumpPopup();
});

// Product Images
const productImages = ['product-01.jpeg', 'product-02.jpeg', 'product-03.jpeg', 'product-04.jpeg', 'product-05.jpeg', 'product-06.jpeg'];

function loadThumbnails() {
  const thumbsContainer = document.getElementById('thumbs');
  thumbsContainer.innerHTML = '';
  productImages.forEach((src, i) => {
    const thumb = document.createElement('img');
    thumb.src = `./images/product/${src}`;
    thumb.alt = `Product view ${i + 1}`;
    thumb.loading = 'lazy';
    thumb.style.cssText = `width:72px;height:96px;border-radius:10px;cursor:pointer;border:2px solid ${i === 0 ? 'var(--color-primary)' : 'transparent'};object-fit:cover;transition:all 0.2s;flex-shrink:0`;
    thumb.onclick = () => switchMainImage(src, thumb);
    thumbsContainer.appendChild(thumb);
  });
}

function switchMainImage(src, thumbElement) {
  const heroImg = document.getElementById('heroImage');
  heroImg.src = `./images/product/${src}`;
  document.querySelectorAll('#thumbs img').forEach(t => t.style.borderColor = 'transparent');
  thumbElement.style.borderColor = 'var(--color-primary)';
}

// Size and Cart Functions
window.selectedSize = null;
window.currentOrderType = null;

function selectSize(button, size) {
  document.querySelectorAll('.size-btn').forEach(btn => {
    btn.classList.remove('selected');
    btn.style.background = '#fff';
    btn.style.color = 'var(--color-text)';
  });
  button.classList.add('selected');
  button.style.background = 'var(--gradient-primary)';
  button.style.color = '#fff';
  window.selectedSize = size;
}

// SimpleSwap Pool Integration
const SIMPLESWAP_POOL_API = 'https://simpleswap-automation-1.onrender.com';
let requestInFlight = false;

async function getExchangeFromPool(amountUSD) {
  if (requestInFlight) return;
  requestInFlight = true;
  try {
    const btn = document.querySelector('.cta-btn.cta-primary');
    const originalText = btn ? btn.innerHTML : '';
    if (btn) btn.innerHTML = 'Creating your order...<div class="btn-subtitle">Please wait</div>';

    const controller = new AbortController();
    const timeoutId = setTimeout(() => controller.abort(), 15000);

    const response = await fetch(`${SIMPLESWAP_POOL_API}/buy-now`, {
      method: 'POST',
      headers: { 'Content-Type': 'application/json' },
      body: JSON.stringify({ amountUSD: amountUSD }),
      signal: controller.signal
    });

    clearTimeout(timeoutId);
    const data = await response.json();

    if (data.success && data.exchangeUrl) {
      window.location.href = data.exchangeUrl;
    } else {
      alert('Unable to create order. Please try again.');
      if (btn) btn.innerHTML = originalText;
    }
  } catch (error) {
    console.error('[POOL] Error:', error);
    alert(error.name === 'AbortError' ? 'Request timeout. Please try again.' : 'Payment error. Please try again.');
    const btn = document.querySelector('.cta-btn.cta-primary');
    if (btn) btn.innerHTML = 'CLAIM YOURS BEFORE IT\'S GONE - $59<div class="btn-subtitle">In Stock: Ships Same-Day (Only 23 Left)</div>';
  } finally {
    requestInFlight = false;
  }
}

async function processOrder(amountUSD) {
  if (typeof ttq !== 'undefined') {
    ttq.track('Purchase', {
      content_id: 'draped-tulle-dress',
      content_type: 'product',
      content_name: 'Draped Tulle Dress',
      price: amountUSD,
      quantity: 1,
      currency: 'USD',
      value: amountUSD
    });
  }
  await getExchangeFromPool(amountUSD);
}

function handleAddToCart(type) {
  perfMetrics.mark(`cta-clicked-${type}`);
  window.currentOrderType = type;

  if (!window.selectedSize) {
    const sizeSection = document.querySelector('.size-grid');
    if (sizeSection) {
      sizeSection.scrollIntoView({ behavior: 'smooth', block: 'center' });
      sizeSection.style.animation = 'pulse 1s ease-in-out';
    }
    return;
  }
  showOrderBumpPopup(type);
}

function showOrderBumpPopup(type) {
  const basePrice = type === 'primary' ? 59 : 19;
  const bumpPrice = 10;
  const total = basePrice + bumpPrice;

  document.getElementById('orderSummary').innerHTML = `
    <div style="display:flex;justify-content:space-between;align-items:center;margin-bottom:12px">
      <span style="color:var(--color-text-secondary)">${type === 'primary' ? 'Draped Tulle Dress' : 'Pre-Order: Draped Tulle Dress'}</span>
      <span style="font-weight:600;color:var(--color-text)">$${basePrice}</span>
    </div>
    <div style="display:flex;justify-content:space-between;align-items:center;margin-bottom:12px;padding-bottom:12px;border-bottom:1px solid var(--color-border)">
      <span style="color:var(--color-primary-dark);font-weight:600">+ Pearl Drop Earrings</span>
      <span style="font-weight:600;color:var(--color-primary-dark)">$${bumpPrice}</span>
    </div>
    <div style="display:flex;justify-content:space-between;align-items:center">
      <span style="font-size:18px;font-weight:700;color:var(--color-text)">Total</span>
      <span style="font-size:26px;font-weight:700;color:var(--color-primary-dark)">$${total}</span>
    </div>
  `;

  document.getElementById('orderBumpPopup').style.display = 'flex';
  document.body.style.overflow = 'hidden';
}

function closeOrderBumpPopup() {
  document.getElementById('orderBumpPopup').style.display = 'none';
  document.body.style.overflow = 'auto';
}

function acceptOrderBump() {
  closeOrderBumpPopup();
  const amount = window.currentOrderType === 'primary' ? 69 : 29;
  processOrder(amount);
}

function declineOrderBump() {
  closeOrderBumpPopup();
  const amount = window.currentOrderType === 'primary' ? 59 : 19;
  processOrder(amount);
}

// Platform Icons
const platformSVGs = {
  tiktok: `<svg viewBox="0 0 24 24" fill="currentColor"><path d="M19.59 6.69a4.83 4.83 0 01-3.77-4.25V2h-3.45v13.67a2.89 2.89 0 01-5.2 1.74 2.89 2.89 0 012.31-4.64 2.93 2.93 0 01.88.13V9.4a6.84 6.84 0 00-1-.05A6.33 6.33 0 005 20.1a6.34 6.34 0 0010.86-4.43v-7a8.16 8.16 0 004.77 1.52v-3.4a4.85 4.85 0 01-1-.1z"/></svg>`,
  instagram: `<svg viewBox="0 0 24 24" fill="currentColor"><path d="M12 2.163c3.204 0 3.584.012 4.85.07 3.252.148 4.771 1.691 4.919 4.919.058 1.265.069 1.645.069 4.849 0 3.205-.012 3.584-.069 4.849-.149 3.225-1.664 4.771-4.919 4.919-1.266.058-1.644.07-4.85.07-3.204 0-3.584-.012-4.849-.07-3.26-.149-4.771-1.699-4.919-4.92-.058-1.265-.07-1.644-.07-4.849 0-3.204.013-3.583.07-4.849.149-3.227 1.664-4.771 4.919-4.919 1.266-.057 1.645-.069 4.849-.069zM12 0C8.741 0 8.333.014 7.053.072 2.695.272.273 2.69.073 7.052.014 8.333 0 8.741 0 12c0 3.259.014 3.668.072 4.948.2 4.358 2.618 6.78 6.98 6.98C8.333 23.986 8.741 24 12 24c3.259 0 3.668-.014 4.948-.072 4.354-.2 6.782-2.618 6.979-6.98.059-1.28.073-1.689.073-4.948 0-3.259-.014-3.667-.072-4.947-.196-4.354-2.617-6.78-6.979-6.98C15.668.014 15.259 0 12 0zm0 5.838a6.162 6.162 0 100 12.324 6.162 6.162 0 000-12.324zM12 16a4 4 0 110-8 4 4 0 010 8zm6.406-11.845a1.44 1.44 0 100 2.881 1.44 1.44 0 000-2.881z"/></svg>`,
  facebook: `<svg viewBox="0 0 24 24" fill="#1877F2"><path d="M24 12.073c0-6.627-5.373-12-12-12s-12 5.373-12 12c0 5.99 4.388 10.954 10.125 11.854v-8.385H7.078v-3.47h3.047V9.43c0-3.007 1.792-4.669 4.533-4.669 1.312 0 2.686.235 2.686.235v2.953H15.83c-1.491 0-1.956.925-1.956 1.874v2.25h3.328l-.532 3.47h-2.796v8.385C19.612 23.027 24 18.062 24 12.073z"/></svg>`,
  trustpilot: `<svg viewBox="0 0 24 24" fill="#00b67a"><path d="M12 17.27L18.18 21l-1.64-7.03L22 9.24l-7.19-.61L12 2 9.19 8.63 2 9.24l5.46 4.73L5.82 21z"/></svg>`,
  google: `<svg viewBox="0 0 24 24"><path fill="#4285F4" d="M22.56 12.25c0-.78-.07-1.53-.2-2.25H12v4.26h5.92c-.26 1.37-1.04 2.53-2.21 3.31v2.77h3.57c2.08-1.92 3.28-4.74 3.28-8.09z"/><path fill="#34A853" d="M12 23c2.97 0 5.46-.98 7.28-2.66l-3.57-2.77c-.98.66-2.23 1.06-3.71 1.06-2.86 0-5.29-1.93-6.16-4.53H2.18v2.84C3.99 20.53 7.7 23 12 23z"/><path fill="#FBBC05" d="M5.84 14.09c-.22-.66-.35-1.36-.35-2.09s.13-1.43.35-2.09V7.07H2.18C1.43 8.55 1 10.22 1 12s.43 3.45 1.18 4.93l2.85-2.22.81-.62z"/><path fill="#EA4335" d="M12 5.38c1.62 0 3.06.56 4.21 1.64l3.15-3.15C17.45 2.09 14.97 1 12 1 7.7 1 3.99 3.47 2.18 7.07l3.66 2.84c.87-2.6 3.3-4.53 6.16-4.53z"/></svg>`
};

const platformColors = {
  tiktok: '#000000',
  instagram: '#E4405F',
  facebook: '#1877F2',
  trustpilot: '#00b67a',
  google: '#4285F4'
};

// Testimonials Data - 30 from agent-1b.json
const testimonials = [
  { name: "Madison Taylor", platform: "tiktok", rating: 5, text: "OMG THIS DRESS!!! I wore it to my bestfriends wedding and literally everyone was asking where I got it!! The tulle is so dreamy and flowy, defintely size down tho if you want a tighter fit", date: "2 days ago", img: 1 },
  { name: "Jasmine Chen", platform: "tiktok", rating: 5, text: "not me crying bc this dress is THAT stunning the draping is everything, wore it for my anniversary dinner and my bf couldn't stop staring lol. shipped super fast to!! 10/10 no notes", date: "3 days ago", img: 2 },
  { name: "Aisha Rahman", platform: "tiktok", rating: 4, text: "ok so the dress is gorgeous BUT just know its pretty sheer so you def need the right undergarments!! I got a size medium (im 5'6 and 140lbs) and it fits perfect. the quality is wayyy better than i expected", date: "4 days ago", img: 3 },
  { name: "Brooklyn Martinez", platform: "tiktok", rating: 5, text: "yall... RUN dont walk!!! this dress made me feel like a literal princess at my engagement photos. the way it moves when you walk is *chefs kiss* also it photographs amazinggg", date: "5 days ago", img: 4 },
  { name: "Sophie Anderson", platform: "tiktok", rating: 5, text: "I LIVE IN THIS DRESS NOW wore it to three different events already and got compliments every single time!! The draped details are so elegant and the tulle quality is insane. definately recommend!", date: "1 week ago", img: 5 },
  { name: "Priya Patel", platform: "tiktok", rating: 4, text: "obsessed with this dress but ngl it does need to be steamed when it arrives!! once i did that tho it looked perfect. wore it to a black tie event and felt sooo fancy", date: "1 week ago", img: 6 },
  { name: "Emma Rodriguez", platform: "tiktok", rating: 5, text: "THIS IS THE DRESS!! if your looking for something elegant but still fun this is IT. I wore it for my birthday dinner and the vibe was immaculate also shipping was crazy fast, like 3 days!!", date: "5 days ago", img: 7 },
  { name: "Chloe Williams", platform: "tiktok", rating: 5, text: "ok but why is nobody talking about how COMFORTABLE this dress is?! like yes its stunning but I wore it for 8 hours straight at a wedding and didnt want to take it off. the tulle is so soft!!", date: "3 days ago", img: 8 },
  { name: "Layla Hassan", platform: "tiktok", rating: 3, text: "the dress is beautiful dont get me wrong, but its more sheer than the photos show. had to get a slip dress to wear underneath which was annoying. still cute tho and the draping is really pretty!", date: "1 week ago", img: 9 },
  { name: "Aria Kim", platform: "instagram", rating: 5, text: "Absolutely in love with this dress. The draping is exquisite and the tulle has such a romantic, ethereal quality. Wore it for a rooftop dinner in NYC and felt like I stepped out of a fairytale. The fit is perfection!", date: "6 days ago", img: 10 },
  { name: "Luna Martinez", platform: "instagram", rating: 5, text: "This dress is a showstopper. Photographed beautifully for my brand shoot - the way it catches light is stunning. The draped silhouette is so flattering and the tulle quality feels luxurious.", date: "1 week ago", img: 11 },
  { name: "Zara Ahmed", platform: "instagram", rating: 4, text: "Obsessed with the elegance of this piece. The draping is so unique and the tulle flows beautifully. Only giving 4 stars because it does need proper undergarments, but that's standard for tulle.", date: "4 days ago", img: 12 },
  { name: "Valentina Silva", platform: "instagram", rating: 5, text: "When I tell you this dress is EVERYTHING. The romantic draping, the delicate tulle, the way it moves... *chef's kiss* Wore it for anniversary photos and my photographer couldn't stop raving!", date: "5 days ago", img: 13 },
  { name: "Sienna Brooks", platform: "instagram", rating: 5, text: "Found my new favorite dress. The ethereal quality of the tulle paired with the sophisticated draping makes this piece so versatile. Dressed it down with sandals for brunch, then elevated it with heels for dinner.", date: "1 week ago", img: 14 },
  { name: "Rebecca Morrison", platform: "facebook", rating: 5, text: "I have to share my experience with this gorgeous dress! I ordered it for my daughter's wedding and was blown away. The tulle is such high quality - not cheap or scratchy at all. The draping is so flattering!", date: "1 week ago", img: 15 },
  { name: "Catherine O'Brien", platform: "facebook", rating: 4, text: "This dress is beautful and I got so many compliments when I wore it to a black tie gala. The draping is really unique. I took off one star because it is quite sheer - had to purchase a slip separately.", date: "2 weeks ago", img: 16 },
  { name: "Jennifer Lee", platform: "facebook", rating: 5, text: "Where do I even start?! This dress exceeded every expectation. I wore it to my 25th wedding anniversary celebration and felt absolutely stunning. My husband couldn't stop telling me how beautiful I looked!", date: "1 week ago", img: 17 },
  { name: "Sarah Mitchell", platform: "trustpilot", rating: 5, text: "Excellent quality dress - exceeded expectations. The tulle fabric is soft and luxurious, not cheap or scratchy. The draping is beautifully executed. True to size, fast shipping, beautiful packaging!", date: "2 weeks ago", img: 18 },
  { name: "Amanda Foster", platform: "trustpilot", rating: 4, text: "Beautiful dress with minor considerations. Ordered for a wedding and received numerous compliments. The draping is unique and elegant. Runs slightly large so consider sizing down.", date: "2 weeks ago", img: 19 },
  { name: "Rachel Thompson", platform: "trustpilot", rating: 5, text: "Outstanding quality and customer service. This is my second purchase and I'm impressed again. The Draped Tulle Dress is absolutely beautiful - the quality and craftsmanship are exceptional!", date: "3 weeks ago", img: 20 },
  { name: "Lisa Parker", platform: "google", rating: 5, text: "Absolutely stunning dress! The tulle quality is amazing and the draping is so elegant. Wore it to a black-tie event and got compliments all night. True to size and shipping was super fast!", date: "1 week ago", img: 21 },
  { name: "Hannah White", platform: "google", rating: 4, text: "Beautiful dress, very elegant. Only issue is it's quite sheer so plan for apropriate undergarments. The draping is gorgeous and quality is excellent for the price. Would buy again!", date: "2 weeks ago", img: 22 },
  { name: "Nicole Davis", platform: "google", rating: 5, text: "Love this dress! The tulle is so soft and the draped design is really flattering. Recieved so many compliments. Shipping was fast and packaging was lovely. Great value for money!", date: "1 week ago", img: 23 },
  { name: "Olivia Thompson", platform: "tiktok", rating: 5, text: "YALL I FEEL LIKE A FAIRY PRINCESS this dress is everythinggg!! wore it to my graduation dinner and my whole family was shook. the quality is unreal for this price point!!", date: "4 days ago", img: 24 },
  { name: "Mia Johnson", platform: "tiktok", rating: 5, text: "besttttt purchase ever!! I was nervous ordering online but this exceeded all expectations. the draped details are so unique and elegant. got SO many compliments at my friends engagement party!", date: "3 days ago", img: 25 },
  { name: "Isabella Garcia", platform: "tiktok", rating: 4, text: "love love LOVE this dress but be aware it runs a tiny bit large! I usually wear a small but shouldve gotten an XS for a more fitted look. that said the quality and design is absolutely stunning!", date: "1 week ago", img: 26 },
  { name: "Amara Jackson", platform: "instagram", rating: 4, text: "This dress is stunning but definately plan for alterations if you're petite! I'm 5'2\" and had to get the hem adjusted. The quality and design are worth it though. Wore it to a wedding and felt beautiful!", date: "5 days ago", img: 27 },
  { name: "Nora Petersen", platform: "instagram", rating: 5, text: "Elevated elegance in dress form. The draped tulle creates such a dreamy, romantic silhouette. Perfect for special occasions. Shipping was surprisingly fast and packaging was gorgeous!", date: "1 week ago", img: 28 },
  { name: "Freya Nielsen", platform: "instagram", rating: 5, text: "This dress is pure magic. The way the tulle drapes is so flattering on every body type. I wore it to my best friend's engagement party and recieved endless compliments. It photographs like a dream!", date: "4 days ago", img: 1 },
  { name: "Michelle Anderson", platform: "facebook", rating: 4, text: "I bought this dress for my son's graduation ceremony and it was perfect. The draped tulle gives it such a sophisticated look. It runs slightly large but the medium still worked with a belt. Great quality!", date: "2 weeks ago", img: 2 }
];

// Custom SVG Icons
const svgIcons = {
  shipping: `<svg viewBox='0 0 24 24' fill='none' xmlns='http://www.w3.org/2000/svg'><path d='M2.8,15.2c0.1,0.8,0.7,1.4,1.5,1.5c0.2,0,0.4,0,0.6,0h0.3c0.3-1.2,1.4-2.1,2.7-2.1s2.4,0.9,2.7,2.1h4.6c0.3-1.2,1.4-2.1,2.7-2.1s2.4,0.9,2.7,2.1h0.2c0.9,0,1.6-0.7,1.6-1.6v-3.4l-3.8-3.9H15v6.4c0,0.5-0.4,0.9-0.9,0.9H3.7c-0.5,0-0.9-0.4-0.9-0.9V15.2z' stroke='currentColor' stroke-width='1.8' stroke-linecap='round' stroke-linejoin='round'/><ellipse cx='7.9' cy='17.3' rx='1.6' ry='1.5' stroke='currentColor' stroke-width='1.8'/><ellipse cx='17.9' cy='17.3' rx='1.6' ry='1.5' stroke='currentColor' stroke-width='1.8'/><path d='M2.9,12.3V6.8c0-0.9,0.7-1.7,1.6-1.7h9.4c0.9,0,1.6,0.8,1.6,1.7v5.4' stroke='currentColor' stroke-width='1.8' stroke-linecap='round'/><path d='M15.5,8.8h2.8c0.3,0,0.6,0.1,0.8,0.4l3.6,3.7' stroke='currentColor' stroke-width='1.8' stroke-linecap='round' stroke-linejoin='round'/></svg>`,
  returns: `<svg viewBox='0 0 24 24' fill='none' xmlns='http://www.w3.org/2000/svg'><path d='M4.8,14.2c1.2,3.8,4.7,6.5,8.9,6.5c5.1,0,9.3-4.2,9.3-9.3s-4.2-9.3-9.3-9.3c-3.8,0-7.1,2.3-8.5,5.6' stroke='currentColor' stroke-width='1.8' stroke-linecap='round'/><path d='M2.3,8.4c0.2,0.3,0.6,0.4,0.9,0.2l4.2-2.8c0.3-0.2,0.4-0.6,0.2-0.9L5.2,1.8C5,1.5,4.6,1.4,4.3,1.6L2.1,3.1C1.8,3.3,1.7,3.7,1.9,4L2.3,8.4z' stroke='currentColor' stroke-width='1.6' stroke-linecap='round' stroke-linejoin='round'/><path d='M10.8,11.2l2.1,2.2c0.3,0.3,0.8,0.3,1.1,0l4.6-4.8' stroke='currentColor' stroke-width='1.9' stroke-linecap='round' stroke-linejoin='round'/></svg>`,
  sizeChart: `<svg viewBox='0 0 24 24' fill='none' xmlns='http://www.w3.org/2000/svg'><rect x='3.5' y='4.5' width='17' height='15' rx='1.5' stroke='currentColor' stroke-width='1.8'/><line x1='3.5' y1='9.2' x2='20.5' y2='9.2' stroke='currentColor' stroke-width='1.8'/><line x1='9.8' y1='9.2' x2='9.8' y2='19.5' stroke='currentColor' stroke-width='1.8'/><path d='M13.8,6.8h4.2' stroke='currentColor' stroke-width='1.5' stroke-linecap='round'/><path d='M5.8,12.4h2.1' stroke='currentColor' stroke-width='1.3' stroke-linecap='round'/><path d='M5.8,15.8h2.4' stroke='currentColor' stroke-width='1.3' stroke-linecap='round'/><path d='M12.2,12.4h6.1' stroke='currentColor' stroke-width='1.3' stroke-linecap='round'/><path d='M12.2,15.8h5.3' stroke='currentColor' stroke-width='1.3' stroke-linecap='round'/></svg>`,
  heart: `<svg viewBox='0 0 24 24' fill='none' xmlns='http://www.w3.org/2000/svg'><path d='M12.2,20.8c-0.1,0.1-0.3,0.1-0.4,0c-2.9-2.3-5.3-4.3-7-6.2c-1.8-2-2.6-3.8-2.6-5.7c0-2.8,2-5,4.6-5c1.5,0,2.8,0.7,3.7,1.8c0.3,0.4,0.9,0.4,1.2,0c0.9-1.1,2.2-1.8,3.7-1.8c2.6,0,4.6,2.2,4.6,5c0,1.9-0.8,3.7-2.6,5.7C17.5,16.5,15.1,18.5,12.2,20.8z' stroke='currentColor' stroke-width='1.8' stroke-linecap='round' stroke-linejoin='round'/></svg>`,
  checkmark: `<svg viewBox='0 0 24 24' fill='none' xmlns='http://www.w3.org/2000/svg'><circle cx='12' cy='12' r='9.5' stroke='currentColor' stroke-width='1.8'/><path d='M7.8,12.2c0.8,0.9,1.6,1.8,2.4,2.7c0.3,0.3,0.7,0.3,1,0c2.2-2.8,4.4-5.6,6.6-8.4' stroke='currentColor' stroke-width='2.2' stroke-linecap='round' stroke-linejoin='round'/></svg>`,
  accordionArrow: `<svg viewBox='0 0 24 24' fill='none' xmlns='http://www.w3.org/2000/svg'><path d='M5.8,9.2c1.8,2.1,3.7,4.2,5.5,6.3c0.3,0.4,0.9,0.4,1.2,0c1.8-2.1,3.7-4.2,5.5-6.3' stroke='currentColor' stroke-width='2.2' stroke-linecap='round' stroke-linejoin='round'/></svg>`
};

function loadRemainingContent() {
  const lazyContent = document.getElementById('lazyContent');

  lazyContent.innerHTML = `
    <!-- Size Selector Section -->
    <div class="section fade-in" style="padding:48px 20px;border-top:1px solid var(--color-border);max-width:1200px;margin:0 auto">
      <h3 style="margin-bottom:24px;font-weight:600;font-size:20px;color:var(--color-text)">Select Your Size:</h3>
      <div class="size-grid" style="margin-bottom:32px">
        ${[{s:'XXS',a:true},{s:'XS',a:true},{s:'S',a:true},{s:'M',a:true},{s:'L',a:true},{s:'XL',a:false},{s:'XXL',a:false}].map(size =>
          `<button class="size-btn" data-size="${size.s}" ${!size.a ? 'disabled' : ''} onclick="selectSize(this, '${size.s}')">${size.s}${!size.a ? '<span style="display:block;font-size:10px;color:var(--color-error);margin-top:2px">Sold Out</span>' : ''}</button>`
        ).join('')}
      </div>
      <div style="background:linear-gradient(135deg, rgba(167,139,190,0.08) 0%, rgba(229,164,203,0.08) 100%);border-left:4px solid var(--color-primary);padding:20px 24px;border-radius:0 12px 12px 0">
        <strong style="color:var(--color-primary-dark);font-size:15px">Free Returns + Fast Shipping</strong><br>
        <span style="color:var(--color-text-secondary);font-size:14px">Not satisfied? Return within 30 days for a full refund.</span>
      </div>
    </div>

    <!-- Product Details Accordion -->
    <div class="section fade-in" style="padding:48px 20px;background:var(--color-bg-alt)">
      <div style="max-width:800px;margin:0 auto">
        <h2 class="section-title">Product Details</h2>
        <div class="accordion">
          <div class="accordion-item">
            <button class="accordion-header" aria-expanded="false" onclick="toggleAccordion(this)">
              <div style="display:flex;align-items:center;gap:12px">
                <span class="accordion-icon">${svgIcons.checkmark}</span>
                <span>Description</span>
              </div>
              <span class="accordion-arrow">${svgIcons.accordionArrow}</span>
            </button>
            <div class="accordion-content">
              <div class="accordion-content-inner">
                <p>Experience pure elegance with our Draped Tulle Dress, where soft, luxurious tulle meets sophisticated draping to create a silhouette that's both romantic and refined. This statement piece transforms every occasion into a moment of effortless beauty.</p>
                <ul>
                  <li>Premium soft tulle fabric that flows beautifully with every movement</li>
                  <li>Expertly draped design that flatters every body type</li>
                  <li>Versatile enough for weddings, galas, photoshoots, and special celebrations</li>
                  <li>Carefully crafted construction for lasting quality and comfort</li>
                  <li>Available in multiple sizes with true-to-size fit</li>
                </ul>
              </div>
            </div>
          </div>
          <div class="accordion-item">
            <button class="accordion-header" aria-expanded="false" onclick="toggleAccordion(this)">
              <div style="display:flex;align-items:center;gap:12px">
                <span class="accordion-icon">${svgIcons.sizeChart}</span>
                <span>Size Guide</span>
              </div>
              <span class="accordion-arrow">${svgIcons.accordionArrow}</span>
            </button>
            <div class="accordion-content">
              <div class="accordion-content-inner">
                <p>Our Draped Tulle Dress is designed with a true-to-size fit. For the most flattering silhouette, we recommend ordering your regular size. If you prefer a more fitted look, consider sizing down.</p>
                <table style="width:100%;border-collapse:collapse;margin:16px 0;font-size:14px">
                  <tr style="background:var(--color-bg)"><th style="padding:12px;text-align:left;border:1px solid var(--color-border)">Size</th><th style="padding:12px;border:1px solid var(--color-border)">Bust</th><th style="padding:12px;border:1px solid var(--color-border)">Waist</th><th style="padding:12px;border:1px solid var(--color-border)">Hips</th></tr>
                  <tr><td style="padding:12px;border:1px solid var(--color-border)">XS</td><td style="padding:12px;border:1px solid var(--color-border)">32-34"</td><td style="padding:12px;border:1px solid var(--color-border)">24-26"</td><td style="padding:12px;border:1px solid var(--color-border)">34-36"</td></tr>
                  <tr><td style="padding:12px;border:1px solid var(--color-border)">S</td><td style="padding:12px;border:1px solid var(--color-border)">34-36"</td><td style="padding:12px;border:1px solid var(--color-border)">26-28"</td><td style="padding:12px;border:1px solid var(--color-border)">36-38"</td></tr>
                  <tr><td style="padding:12px;border:1px solid var(--color-border)">M</td><td style="padding:12px;border:1px solid var(--color-border)">36-38"</td><td style="padding:12px;border:1px solid var(--color-border)">28-30"</td><td style="padding:12px;border:1px solid var(--color-border)">38-40"</td></tr>
                  <tr><td style="padding:12px;border:1px solid var(--color-border)">L</td><td style="padding:12px;border:1px solid var(--color-border)">38-40"</td><td style="padding:12px;border:1px solid var(--color-border)">30-32"</td><td style="padding:12px;border:1px solid var(--color-border)">40-42"</td></tr>
                </table>
              </div>
            </div>
          </div>
          <div class="accordion-item">
            <button class="accordion-header" aria-expanded="false" onclick="toggleAccordion(this)">
              <div style="display:flex;align-items:center;gap:12px">
                <span class="accordion-icon">${svgIcons.shipping}</span>
                <span>Shipping Info</span>
              </div>
              <span class="accordion-arrow">${svgIcons.accordionArrow}</span>
            </button>
            <div class="accordion-content">
              <div class="accordion-content-inner">
                <p>We're committed to getting your dream dress to you quickly and safely. All orders are carefully packaged and ship within 1-2 business days.</p>
                <ul>
                  <li>Standard shipping: 3-5 business days</li>
                  <li>Expedited options available at checkout</li>
                  <li>Free shipping on all orders over $150</li>
                  <li>All orders include tracking information</li>
                </ul>
              </div>
            </div>
          </div>
          <div class="accordion-item">
            <button class="accordion-header" aria-expanded="false" onclick="toggleAccordion(this)">
              <div style="display:flex;align-items:center;gap:12px">
                <span class="accordion-icon">${svgIcons.returns}</span>
                <span>Returns Policy</span>
              </div>
              <span class="accordion-arrow">${svgIcons.accordionArrow}</span>
            </button>
            <div class="accordion-content">
              <div class="accordion-content-inner">
                <p>We want you to love your dress completely. If for any reason you're not satisfied, we offer hassle-free returns within 30 days of delivery.</p>
                <ul>
                  <li>Items must be unworn, unwashed, and in original condition</li>
                  <li>Contact our customer service team to initiate your return</li>
                  <li>We'll provide a prepaid shipping label</li>
                  <li>Refunds processed within 5-7 business days</li>
                </ul>
              </div>
            </div>
          </div>
          <div class="accordion-item">
            <button class="accordion-header" aria-expanded="false" onclick="toggleAccordion(this)">
              <div style="display:flex;align-items:center;gap:12px">
                <span class="accordion-icon">${svgIcons.heart}</span>
                <span>Care Instructions</span>
              </div>
              <span class="accordion-arrow">${svgIcons.accordionArrow}</span>
            </button>
            <div class="accordion-content">
              <div class="accordion-content-inner">
                <p>To keep your Draped Tulle Dress looking pristine, we recommend dry cleaning only.</p>
                <ul>
                  <li>Gently steam on low heat to remove any wrinkles - never iron directly on tulle</li>
                  <li>Store hanging in a breathable garment bag away from direct sunlight</li>
                  <li>Avoid contact with rough surfaces or sharp objects that could snag the delicate tulle</li>
                  <li>With proper care, this dress will remain a treasured piece for years</li>
                </ul>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>

    <!-- Why Choose Section -->
    <div class="section fade-in" style="padding:60px 20px">
      <div style="max-width:1200px;margin:0 auto">
        <h2 class="section-title">Why Everyone's Obsessed</h2>
        <p class="section-subtitle">Join 50,000+ Happy Customers Who Love Their Dress</p>
        <div class="feature-grid">
          <div class="feature-card">
            ${svgIcons.heart}
            <h3>Premium Quality</h3>
            <p>Soft, luxurious tulle that flows beautifully and feels incredible against your skin</p>
          </div>
          <div class="feature-card">
            ${svgIcons.checkmark}
            <h3>Flattering Fit</h3>
            <p>Expertly draped design that complements every body type and silhouette</p>
          </div>
          <div class="feature-card">
            ${svgIcons.shipping}
            <h3>Fast Shipping</h3>
            <p>Orders ship within 1-2 days with tracking. Get it when you need it</p>
          </div>
        </div>
      </div>
    </div>

    <!-- Testimonials Section -->
    <div class="section fade-in" style="padding:60px 20px;background:var(--color-bg-alt)">
      <div style="max-width:1200px;margin:0 auto">
        <h2 class="section-title">Real Reviews</h2>
        <p class="section-subtitle">Rated 4.9/5 Stars from 12,000+ Reviews</p>
        <div id="testimonialGrid" class="testimonial-grid">
          ${renderTestimonials(9)}
        </div>
        <div style="text-align:center;margin-top:48px">
          <button id="loadMoreBtn" onclick="loadMoreReviews()" style="background:var(--gradient-primary);color:#fff;border:none;padding:16px 48px;border-radius:12px;font-weight:600;cursor:pointer;transition:all 0.25s;box-shadow:0 4px 16px rgba(167,139,190,0.3)">
            Load More Reviews
          </button>
        </div>
      </div>
    </div>

    <!-- Final CTA -->
    <div class="final-cta fade-in">
      <h2>Don't Miss Out</h2>
      <p>Limited Stock Alert - Get the Dress Everyone's Obsessing Over Before It's Gone</p>
      <button onclick="document.querySelector('.product-hero').scrollIntoView({behavior:'smooth'})">
        Claim Yours Now
      </button>
    </div>
  `;

  // Animate elements
  requestAnimationFrame(() => {
    document.querySelectorAll('.fade-in').forEach((el, i) => {
      setTimeout(() => el.classList.add('visible'), i * 100);
    });
  });
}

function toggleAccordion(button) {
  const item = button.closest('.accordion-item');
  const isOpen = item.classList.contains('open');

  // Close all accordions
  document.querySelectorAll('.accordion-item').forEach(i => i.classList.remove('open'));

  // Toggle current
  if (!isOpen) item.classList.add('open');

  // Update aria
  button.setAttribute('aria-expanded', !isOpen);
}

function renderTestimonials(count) {
  return testimonials.slice(0, count).map(t => `
    <div class="testimonial-card">
      <div class="testimonial-header">
        <img src="./images/testimonials/testimonial-${String(t.img).padStart(2, '0')}.jpeg" alt="${t.name}" class="testimonial-avatar" loading="lazy">
        <div class="testimonial-info">
          <div class="testimonial-name">${t.name}</div>
          <div class="testimonial-platform" style="color:${platformColors[t.platform]}">
            ${platformSVGs[t.platform]}
            <span>Verified on ${t.platform.charAt(0).toUpperCase() + t.platform.slice(1)}</span>
          </div>
        </div>
        <div class="testimonial-stars">${''.repeat(t.rating)}${''.repeat(5-t.rating)}</div>
      </div>
      <p class="testimonial-text">${t.text}</p>
      <div class="testimonial-date">${t.date}</div>
    </div>
  `).join('');
}

let reviewsLoaded = 9;
function loadMoreReviews() {
  const grid = document.getElementById('testimonialGrid');
  const remaining = testimonials.slice(reviewsLoaded);

  remaining.forEach((t, i) => {
    const card = document.createElement('div');
    card.className = 'testimonial-card';
    card.style.opacity = '0';
    card.style.transform = 'translateY(20px)';
    card.innerHTML = `
      <div class="testimonial-header">
        <img src="./images/testimonials/testimonial-${String(t.img).padStart(2, '0')}.jpeg" alt="${t.name}" class="testimonial-avatar" loading="lazy">
        <div class="testimonial-info">
          <div class="testimonial-name">${t.name}</div>
          <div class="testimonial-platform" style="color:${platformColors[t.platform]}">
            ${platformSVGs[t.platform]}
            <span>Verified on ${t.platform.charAt(0).toUpperCase() + t.platform.slice(1)}</span>
          </div>
        </div>
        <div class="testimonial-stars">${''.repeat(t.rating)}${''.repeat(5-t.rating)}</div>
      </div>
      <p class="testimonial-text">${t.text}</p>
      <div class="testimonial-date">${t.date}</div>
    `;
    grid.appendChild(card);

    setTimeout(() => {
      card.style.transition = 'all 0.4s ease';
      card.style.opacity = '1';
      card.style.transform = 'translateY(0)';
    }, i * 50);
  });

  reviewsLoaded = testimonials.length;
  document.getElementById('loadMoreBtn').style.display = 'none';
}

// Initialize on load
window.addEventListener('load', () => {
  perfMetrics.mark('window-loaded');
  console.log('Performance Metrics:', perfMetrics.marks);

  // Register Service Worker
  if ('serviceWorker' in navigator) {
    navigator.serviceWorker.register('/sw.js')
      .then(reg => console.log('SW registered:', reg.scope))
      .catch(err => console.log('SW registration skipped'));
  }
});
</script>

</body>
</html>
